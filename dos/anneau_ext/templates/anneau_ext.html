<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Anneau extérieur</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: white;
            font-family: century gothic, arial, calibri;
        }
        h1 {
            color: blue;
            text-align: center;
            margin: 10px 0;
        }
        svg {
            display: block;
            width: 100vw;
            height: 100vh;
            background-color: white;
        }
        .back-button {
            position: absolute;
            color: red;
            background-color: white;
            font-family: century gothic, arial, calibri;
            font-size: 1.5em;
            padding: 10px;
            border: 1px solid red;
            border-radius: 10px;
            margin-left: 20px;
            margin-bottom: 20px;
            text-decoration: none;
            width: 70px;
            bottom: 10px;
        }
        .back-button:hover {
            color: white;
            background-color: red;
        }

        #info-box {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 6px 10px;
            border: 1px solid black;
            background-color: #f9f9f9;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.4;
            width: 160px;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <h1>Anneau extérieur</h1>

    <div id="info-box">
        x: <span id="x">0.00</span><br>
        y: <span id="y">0.00</span><br>
        distance: <span id="dist">0.00</span>
    </div>

        <div id="rayon-box" style="
        position: absolute;
        top: 120px;
        left: 10px;
        padding: 6px 10px;
        border: 1px solid black;
        background-color: #f0f0f0;
        font-family: monospace;
        font-size: 14px;
        width: 180px;
        box-sizing: border-box;
    ">
        Rayon extérieur &nbsp;&nbsp;&nbsp;= <span id="r_ext">{{ rayon_ext }}</span> cm<br>
        Rayon intérieur &nbsp;&nbsp;&nbsp;= <span id="r_int">{{ rayon_int }}</span> cm
    </div>


    <svg xmlns="http://www.w3.org/2000/svg" viewBox="-13 -13 30 30" width="700" height="700" onmousemove="afficherCoord(event)"> 

        <g id="cadre">
            <rect x="-13" y="-13" width="26" height="26"
                  stroke="black" stroke-width="0.05" fill="none"/>
        </g>

        <g id="contenu" transform="scale(0.9) translate(0, 0)">

            <circle cx="0" cy="0" r="12.35" stroke="black" stroke-width="0.05" fill="none" />
            <circle cx="0" cy="0" r="11.95" stroke="black" stroke-width="0.05" fill="none" />
            <circle cx="0" cy="0" r="11.7"  stroke="black" stroke-width="0.05" fill="none" />
            <circle cx="0" cy="0" r="11.3"  stroke="black" stroke-width="0.05" fill="none" />
            <circle cx="0" cy="0" r="10.62" stroke="black" stroke-width="0.05" fill="none" />
            <circle cx="0" cy="0" r="10.42" stroke="black" stroke-width="0.05" fill="none" />
            <circle cx="0" cy="0" r="10.07" stroke="black" stroke-width="0.05" fill="none" />
            <circle cx="0" cy="0" r="9.52"  stroke="black" stroke-width="0.05" fill="none" />


            <g stroke="black" stroke-width="0.02">
                {% for trait in traits_graduation.traits_1_degre %}
                    <line x1="{{ trait.x1 }}" y1="{{ trait.y1 }}" x2="{{ trait.x2 }}" y2="{{ trait.y2 }}" />
                {% endfor %}
            </g>

            <g stroke="black" stroke-width="0.03">
                {% for trait in traits_graduation.traits_5_degres %}
                    <line x1="{{ trait.x1 }}" y1="{{ trait.y1 }}" x2="{{ trait.x2 }}" y2="{{ trait.y2 }}" />
                {% endfor %}
            </g>

            <g stroke="red" stroke-width="0.05">
                {% for trait in traits_graduation.traits_30_degres %}
                    <line x1="{{ trait.x1 }}" y1="{{ trait.y1 }}" x2="{{ trait.x2 }}" y2="{{ trait.y2 }}" />
                {% endfor %}
            </g>

            <g stroke="black" stroke-width="0.02">
                {% for ligne in subdivisions_annee.subdivisions_jours %}
                    <line x1="{{ ligne.x1 }}" y1="{{ ligne.y1 }}" x2="{{ ligne.x2 }}" y2="{{ ligne.y2 }}" />
                {% endfor %}
            </g>

            
            <!-- ✅ Traits noirs : jours 5, 10, 15, 20, 25, 30 (sauf le 30 pour les mois à 30 jours) -->
            <g id="traits_intermediaires_tous_mois"></g>

            <script>
            document.addEventListener("DOMContentLoaded", () => {
                const svgNS = "http://www.w3.org/2000/svg";
                const contenu = document.getElementById("traits_intermediaires_tous_mois");

                // Durée de chaque mois (année non bissextile)
                const annee = [
                    { nom: "Janvier", jours: 31 },
                    { nom: "Février", jours: 28 },
                    { nom: "Mars", jours: 31 },
                    { nom: "Avril", jours: 30 },
                    { nom: "Mai", jours: 31 },
                    { nom: "Juin", jours: 30 },
                    { nom: "Juillet", jours: 31 },
                    { nom: "Août", jours: 31 },
                    { nom: "Septembre", jours: 30 },
                    { nom: "Octobre", jours: 31 },
                    { nom: "Novembre", jours: 30 },
                    { nom: "Décembre", jours: 31 }
                ];

                let jour_courant = 9; // position du 31 décembre précédent
                const r_in = 10.05;
                const r_out = 10.6;

                for (const m of annee) {
                    // Pour chaque mois : jours multiples de 5
                    for (let j = 5; j < m.jours; j += 5) {
                        // ⚠️ Ne pas placer le trait du 30 pour les mois à 30 jours
                        if (m.jours === 30 && j === 30) continue;

                        const jour_absolu = jour_courant + j;
                        const angle = jour_absolu * 360 / 365;
                        const rad = (angle - 90) * Math.PI / 180;

                        const x1 = r_in * Math.cos(rad);
                        const y1 = r_in * Math.sin(rad);
                        const x2 = r_out * Math.cos(rad);
                        const y2 = r_out * Math.sin(rad);

                        const line = document.createElementNS(svgNS, "line");
                        line.setAttribute("x1", x1.toFixed(3));
                        line.setAttribute("y1", y1.toFixed(3));
                        line.setAttribute("x2", x2.toFixed(3));
                        line.setAttribute("y2", y2.toFixed(3));
                        line.setAttribute("stroke", "black");
                        line.setAttribute("stroke-width", "0.03");
                        line.setAttribute("data-mois", m.nom);
                        line.setAttribute("data-jour", j);

                        contenu.appendChild(line);
                    }
                    jour_courant += m.jours;
                }
            });
            </script>

            

            <!-- ✅ Traits rouges : fins de mois (entre r=9.45 et r=10.55) -->
            <g id="traits_rouges_fins_de_mois"></g>

            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    const svgNS = "http://www.w3.org/2000/svg";
                    const contenu = document.getElementById("traits_rouges_fins_de_mois");

                    // Durée de chaque mois (année non bissextile)
                    const mois = [
                        { nom: "Janvier", jours: 31 },
                        { nom: "Février", jours: 28 },
                        { nom: "Mars", jours: 31 },
                        { nom: "Avril", jours: 30 },
                        { nom: "Mai", jours: 31 },
                        { nom: "Juin", jours: 30 },
                        { nom: "Juillet", jours: 31 },
                        { nom: "Août", jours: 31 },
                        { nom: "Septembre", jours: 30 },
                        { nom: "Octobre", jours: 31 },
                        { nom: "Novembre", jours: 30 },
                        { nom: "Décembre", jours: 31 }
                    ];

                    // Le 25 décembre est jour 3 (donc 31 décembre = jour 9)
                    let jour_courant = 9; // position du 31 décembre précédent

                    // Paramètres géométriques
                    const r_in = 9.5;
                    const r_out = 10.6;

                    // Boucle sur les 12 fins de mois
                    for (const m of mois) {
                        jour_courant += m.jours;
                        const angle = jour_courant * 360 / 365;
                        const rad = (angle - 90) * Math.PI / 180;

                        const x1 = r_in * Math.cos(rad);
                        const y1 = r_in * Math.sin(rad);
                        const x2 = r_out * Math.cos(rad);
                        const y2 = r_out * Math.sin(rad);

                        const line = document.createElementNS(svgNS, "line");
                        line.setAttribute("x1", x1.toFixed(3));
                        line.setAttribute("y1", y1.toFixed(3));
                        line.setAttribute("x2", x2.toFixed(3));
                        line.setAttribute("y2", y2.toFixed(3));
                        line.setAttribute("stroke", "red");
                        line.setAttribute("stroke-width", "0.03");
                        line.setAttribute("id", "fin_" + m.nom.toLowerCase());
                        line.setAttribute("data-mois", m.nom);

                        contenu.appendChild(line);
                    }
                });
            </script>
            

            <!-- Textes "01" à "12" pour les mois -->
            <g id="textes_mois"></g>
            <script>
            document.addEventListener("DOMContentLoaded", () => {
                const svgNS = "http://www.w3.org/2000/svg";
                const contenu = document.getElementById("textes_mois");

                // Durée de chaque mois (année non bissextile)
                const mois = [
                    { nom: "Janvier", jours: 31 },
                    { nom: "Février", jours: 28 },
                    { nom: "Mars", jours: 31 },
                    { nom: "Avril", jours: 30 },
                    { nom: "Mai", jours: 31 },
                    { nom: "Juin", jours: 30 },
                    { nom: "Juillet", jours: 31 },
                    { nom: "Août", jours: 31 },
                    { nom: "Septembre", jours: 30 },
                    { nom: "Octobre", jours: 31 },
                    { nom: "Novembre", jours: 30 },
                    { nom: "Décembre", jours: 31 }
                ];

                // Rayon fixe pour tous les mois
                const r_texte = 9.75;

                // Le 31 décembre précédent correspond à jour = 9
                let jour_courant = 9;

                for (let i = 0; i < mois.length; i++) {
                    const m = mois[i];

                    // Milieu du mois = début + moitié de la durée
                    const jour_milieu = jour_courant + m.jours / 2;

                    // Conversion en angle (0° = 31 décembre, sens horaire)
                    const angle = jour_milieu * 360 / 365;
                    const rad = (angle - 90) * Math.PI / 180;

                    const x = r_texte * Math.cos(rad);
                    const y = r_texte * Math.sin(rad);

                    // Création du texte (numéro du mois sur deux chiffres)
                    const text = document.createElementNS(svgNS, "text");
                    text.setAttribute("x", x.toFixed(3));
                    text.setAttribute("y", y.toFixed(3));
                    text.setAttribute("fill", "red");
                    text.setAttribute("font-size", "0.5");
                    text.setAttribute("text-anchor", "middle");
                    text.setAttribute("dominant-baseline", "middle");
                    text.setAttribute("transform", `rotate(${angle}, ${x.toFixed(3)}, ${y.toFixed(3)})`);
                    text.textContent = String(i + 1).padStart(2, "0");

                    contenu.appendChild(text);

                    // Passage au mois suivant
                    jour_courant += m.jours;
                }
            });
            </script>



            <!-- Texte "CAPRICORNUS" -->
            <g id="texte_capricornus" transform="rotate(120)"></g>

            <!-- Texte "AQUARIUS" -->
            <g id="texte_aquarius" transform="rotate(150)"></g>
            
            <!-- Texte "PISCES" -->
            <g id="texte_pisces" transform="rotate(180)"></g>

            <!-- Texte "ARIES" -->
            <g id="texte_aries" transform="rotate(210)"></g>

            <!-- Texte "TAURUS" -->
            <g id="texte_taurus" transform="rotate(240)"></g>

            <!-- Texte "GEMINI" -->
            <g id="texte_gemini" transform="rotate(270)"></g>

            <!-- Texte "CANCER" -->
            <g id="texte_cancer" transform="rotate(300)"></g>

            <!-- Texte "LEO" -->
            <g id="texte_leo" transform="rotate(330)"></g>

            <!-- Texte "VIRGO" -->
            <g id="texte_virgo" transform="rotate(360)"></g>

            <!-- Texte "LIBRA" -->
            <g id="texte_libra" transform="rotate(390)"></g>

            <!-- Texte "SCORPIUS" -->
            <g id="texte_scorpius" transform="rotate(420)"></g>

            <!-- Texte "SAGITTARIUS" -->
            <g id="texte_sagittarius" transform="rotate(450)"></g>


            <script>
            document.addEventListener("DOMContentLoaded", () => {
            const svgNS = "http://www.w3.org/2000/svg";

            // === CAPRICORNUS ===
            const contenuCap = document.getElementById("texte_capricornus");
            const r = 10.753;
            const angleStart = 90;
            const angleEnd = 60;

            const startRad = (angleStart - 90) * Math.PI / 180;
            const endRad = (angleEnd - 90) * Math.PI / 180;

            const x1 = (r * Math.cos(startRad)).toFixed(3);
            const y1 = (r * Math.sin(startRad)).toFixed(3);
            const x2 = (r * Math.cos(endRad)).toFixed(3);
            const y2 = (r * Math.sin(endRad)).toFixed(3);

            const pathCap = document.createElementNS(svgNS, "path");
            pathCap.setAttribute("id", "arc_capricornus");
            pathCap.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathCap.setAttribute("fill", "none");
            pathCap.setAttribute("stroke", "none");
            pathCap.setAttribute("transform", "scale(-1,1)");
            contenuCap.appendChild(pathCap);

            const textCap = document.createElementNS(svgNS, "text");
            textCap.setAttribute("fill", "black");
            textCap.setAttribute("font-size", "0.6");
            textCap.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathCap = document.createElementNS(svgNS, "textPath");
            textPathCap.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_capricornus");
            textPathCap.setAttribute("startOffset", "50%");
            textPathCap.setAttribute("text-anchor", "middle");
            textPathCap.textContent = "CAPRICORNUS";

            textCap.appendChild(textPathCap);
            contenuCap.appendChild(textCap);

            // === AQUARIUS ===
            const contenuAqua = document.getElementById("texte_aquarius");

            const pathAqua = document.createElementNS(svgNS, "path");
            pathAqua.setAttribute("id", "arc_aquarius");
            pathAqua.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathAqua.setAttribute("fill", "none");
            pathAqua.setAttribute("stroke", "none");
            pathAqua.setAttribute("transform", "scale(-1,1)");
            contenuAqua.appendChild(pathAqua);

            const textAqua = document.createElementNS(svgNS, "text");
            textAqua.setAttribute("fill", "black");
            textAqua.setAttribute("font-size", "0.6");
            textAqua.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathAqua = document.createElementNS(svgNS, "textPath");
            textPathAqua.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_aquarius");
            textPathAqua.setAttribute("startOffset", "50%");
            textPathAqua.setAttribute("text-anchor", "middle");
            textPathAqua.textContent = "AQUARIUS";

            textAqua.appendChild(textPathAqua);
            contenuAqua.appendChild(textAqua);

            // === PISCES ===
            const contenuPisces = document.getElementById("texte_pisces");

            const pathPisces = document.createElementNS(svgNS, "path");
            pathPisces.setAttribute("id", "arc_pisces");
            pathPisces.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathPisces.setAttribute("fill", "none");
            pathPisces.setAttribute("stroke", "none");
            pathPisces.setAttribute("transform", "scale(-1,1)");
            contenuPisces.appendChild(pathPisces);

            const textPisces = document.createElementNS(svgNS, "text");
            textPisces.setAttribute("fill", "black");
            textPisces.setAttribute("font-size", "0.6");
            textPisces.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathPisces = document.createElementNS(svgNS, "textPath");
            textPathPisces.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_pisces");
            textPathPisces.setAttribute("startOffset", "50%");
            textPathPisces.setAttribute("text-anchor", "middle");
            textPathPisces.textContent = "PISCES";

            textPisces.appendChild(textPathPisces);
            contenuPisces.appendChild(textPisces);

            // === ARIES ===
            const contenuAries = document.getElementById("texte_aries");

            const pathAries = document.createElementNS(svgNS, "path");
            pathAries.setAttribute("id", "arc_aries");
            pathAries.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathAries.setAttribute("fill", "none");
            pathAries.setAttribute("stroke", "none");
            pathAries.setAttribute("transform", "scale(-1,1)");
            contenuAries.appendChild(pathAries);

            const textAries = document.createElementNS(svgNS, "text");
            textAries.setAttribute("fill", "black");
            textAries.setAttribute("font-size", "0.6");
            textAries.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathAries = document.createElementNS(svgNS, "textPath");
            textPathAries.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_aries");
            textPathAries.setAttribute("startOffset", "50%");
            textPathAries.setAttribute("text-anchor", "middle");
            textPathAries.textContent = "ARIES";

            textAries.appendChild(textPathAries);
            contenuAries.appendChild(textAries);

            // === TAURUS ===
            const contenuTaurus = document.getElementById("texte_taurus");

            const pathTaurus = document.createElementNS(svgNS, "path");
            pathTaurus.setAttribute("id", "arc_taurus");
            pathTaurus.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathTaurus.setAttribute("fill", "none");
            pathTaurus.setAttribute("stroke", "none");
            pathTaurus.setAttribute("transform", "scale(-1,1)");
            contenuTaurus.appendChild(pathTaurus);

            const textTaurus = document.createElementNS(svgNS, "text");
            textTaurus.setAttribute("fill", "black");
            textTaurus.setAttribute("font-size", "0.6");
            textTaurus.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathTaurus = document.createElementNS(svgNS, "textPath");
            textPathTaurus.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_taurus");
            textPathTaurus.setAttribute("startOffset", "50%");
            textPathTaurus.setAttribute("text-anchor", "middle");
            textPathTaurus.textContent = "TAURUS";

            textTaurus.appendChild(textPathTaurus);
            contenuTaurus.appendChild(textTaurus);

            // === GEMINI ===
            const contenuGem = document.getElementById("texte_gemini");

            const pathGem = document.createElementNS(svgNS, "path");
            pathGem.setAttribute("id", "arc_gemini");
            pathGem.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathGem.setAttribute("fill", "none");
            pathGem.setAttribute("stroke", "none");
            pathGem.setAttribute("transform", "scale(-1,1)");
            contenuGem.appendChild(pathGem);

            const textGem = document.createElementNS(svgNS, "text");
            textGem.setAttribute("fill", "black");
            textGem.setAttribute("font-size", "0.6");
            textGem.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathGem = document.createElementNS(svgNS, "textPath");
            textPathGem.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_gemini");
            textPathGem.setAttribute("startOffset", "50%");
            textPathGem.setAttribute("text-anchor", "middle");
            textPathGem.textContent = "GEMINI";

            textGem.appendChild(textPathGem);
            contenuGem.appendChild(textGem);

            // === CANCER ===
            const contenuCan = document.getElementById("texte_cancer");

            const pathCan = document.createElementNS(svgNS, "path");
            pathCan.setAttribute("id", "arc_cancer");
            pathCan.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathCan.setAttribute("fill", "none");
            pathCan.setAttribute("stroke", "none");
            pathCan.setAttribute("transform", "scale(-1,1)");
            contenuCan.appendChild(pathCan);

            const textCan = document.createElementNS(svgNS, "text");
            textCan.setAttribute("fill", "black");
            textCan.setAttribute("font-size", "0.6");
            textCan.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathCan = document.createElementNS(svgNS, "textPath");
            textPathCan.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_cancer");
            textPathCan.setAttribute("startOffset", "50%");
            textPathCan.setAttribute("text-anchor", "middle");
            textPathCan.textContent = "CANCER";

            textCan.appendChild(textPathCan);
            contenuCan.appendChild(textCan);

            // === LEO ===
            const contenuLeo = document.getElementById("texte_leo");

            const pathLeo = document.createElementNS(svgNS, "path");
            pathLeo.setAttribute("id", "arc_leo");
            pathLeo.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathLeo.setAttribute("fill", "none");
            pathLeo.setAttribute("stroke", "none");
            pathLeo.setAttribute("transform", "scale(-1,1)");
            contenuLeo.appendChild(pathLeo);

            const textLeo = document.createElementNS(svgNS, "text");
            textLeo.setAttribute("fill", "black");
            textLeo.setAttribute("font-size", "0.6");
            textLeo.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathLeo = document.createElementNS(svgNS, "textPath");
            textPathLeo.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_leo");
            textPathLeo.setAttribute("startOffset", "50%");
            textPathLeo.setAttribute("text-anchor", "middle");
            textPathLeo.textContent = "LEO";

            textLeo.appendChild(textPathLeo);
            contenuLeo.appendChild(textLeo);

            // === VIRGO ===
            const contenuVir = document.getElementById("texte_virgo");

            const pathVir = document.createElementNS(svgNS, "path");
            pathVir.setAttribute("id", "arc_virgo");
            pathVir.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathVir.setAttribute("fill", "none");
            pathVir.setAttribute("stroke", "none");
            pathVir.setAttribute("transform", "scale(-1,1)");
            contenuVir.appendChild(pathVir);

            const textVir = document.createElementNS(svgNS, "text");
            textVir.setAttribute("fill", "black");
            textVir.setAttribute("font-size", "0.6");
            textVir.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathVir = document.createElementNS(svgNS, "textPath");
            textPathVir.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_virgo");
            textPathVir.setAttribute("startOffset", "50%");
            textPathVir.setAttribute("text-anchor", "middle");
            textPathVir.textContent = "VIRGO";

            textVir.appendChild(textPathVir);
            contenuVir.appendChild(textVir);

            // === LIBRA ===
            const contenuLib = document.getElementById("texte_libra");

            const pathLib = document.createElementNS(svgNS, "path");
            pathLib.setAttribute("id", "arc_libra");
            pathLib.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathLib.setAttribute("fill", "none");
            pathLib.setAttribute("stroke", "none");
            pathLib.setAttribute("transform", "scale(-1,1)");
            contenuLib.appendChild(pathLib);

            const textLib = document.createElementNS(svgNS, "text");
            textLib.setAttribute("fill", "black");
            textLib.setAttribute("font-size", "0.6");
            textLib.setAttribute("font-family", "century gothic, arial, calibri");

            const textPathLib = document.createElementNS(svgNS, "textPath");
            textPathLib.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_libra");
            textPathLib.setAttribute("startOffset", "50%");
            textPathLib.setAttribute("text-anchor", "middle");
            textPathLib.textContent = "LIBRA";

            textLib.appendChild(textPathLib);
            contenuLib.appendChild(textLib);

            // === SCORPIUS ===
            const contenuScor = document.getElementById("texte_scorpius");

            const pathScor = document.createElementNS(svgNS, "path");
            pathScor.setAttribute("id", "arc_scorpius");
            pathScor.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathScor.setAttribute("fill", "none");
            pathScor.setAttribute("stroke", "none");
            pathScor.setAttribute("transform", "scale(-1,1)");
            contenuScor.appendChild(pathScor);

            const textScor = document.createElementNS(svgNS, "text");
            textScor.setAttribute("fill", "black");
            textScor.setAttribute("font-size", "0.6");
            textScor.setAttribute("font-family", "century gothic, arial, caScorri");

            const textPathScor = document.createElementNS(svgNS, "textPath");
            textPathScor.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_scorpius");
            textPathScor.setAttribute("startOffset", "50%");
            textPathScor.setAttribute("text-anchor", "middle");
            textPathScor.textContent = "SCORPIUS";

            textScor.appendChild(textPathScor);
            contenuScor.appendChild(textScor);

            // === SAGITTARIUS ===
            const contenuSagit = document.getElementById("texte_sagittarius");

            const pathSagit = document.createElementNS(svgNS, "path");
            pathSagit.setAttribute("id", "arc_sagittarius");
            pathSagit.setAttribute("d", `M ${x2} ${-y2} A ${r} ${r} 0 0 0 ${x1} ${-y1}`);
            pathSagit.setAttribute("fill", "none");
            pathSagit.setAttribute("stroke", "none");
            pathSagit.setAttribute("transform", "scale(-1,1)");
            contenuSagit.appendChild(pathSagit);

            const textSagit = document.createElementNS(svgNS, "text");
            textSagit.setAttribute("fill", "black");
            textSagit.setAttribute("font-size", "0.6");
            textSagit.setAttribute("font-family", "century gothic, arial, caSagitri");

            const textPathSagit = document.createElementNS(svgNS, "textPath");
            textPathSagit.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#arc_sagittarius");
            textPathSagit.setAttribute("startOffset", "50%");
            textPathSagit.setAttribute("text-anchor", "middle");
            textPathSagit.textContent = "SAGITTARIUS";

            textSagit.appendChild(textPathSagit);
            contenuSagit.appendChild(textSagit);

            

            });
            </script>

            




        </g>
    </svg>

    <a href="{{ url_for('dos.dos_menu') }}" class="back-button">Retour</a>

    <script>
        const DIAMETRE_ASTROLABE = parseFloat("{{ diametre_astrolabe if diametre_astrolabe else 25 }}");
        const RAYON_CM = DIAMETRE_ASTROLABE / 2;

        // Conversion SVG → cm
        const facteur_cm = RAYON_CM / 12.35;

        function afficherCoord(evt) {
            const svg = evt.target.ownerSVGElement || evt.target;
            const pt = svg.createSVGPoint();
            pt.x = evt.clientX;
            pt.y = evt.clientY;

            const cursorpt = pt.matrixTransform(svg.getScreenCTM().inverse());
            const scale = 0.9;
            const x_base = cursorpt.x / scale;
            const y_base = cursorpt.y / scale;

            // Conversion en centimètres
            const x_reel = x_base * facteur_cm;
            const y_reel = y_base * facteur_cm;

            document.getElementById("x").textContent = x_reel.toFixed(2);
            document.getElementById("y").textContent = (-y_reel).toFixed(2);
            document.getElementById("dist").textContent = Math.sqrt(x_reel**2 + y_reel**2).toFixed(2);
        }
    </script>

</body>
</html>